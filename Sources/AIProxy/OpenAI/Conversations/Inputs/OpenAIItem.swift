//
//  OpenAIItem.swift
//  AIProxy
//
//  Created by Lou Zell on 12/20/25.
//
// OpenAPI spec: Item, version 2.3.0, line 45079
// Encodable: https://platform.openai.com/docs/api-reference/conversations/create#conversations_create-items-item

/// Content item used to generate a response.
/// This is an item sent into the model, and therefore Encodable only.
/// For the corresponding Decodable output, see OpenAIConversationItem.
nonisolated public enum OpenAIItem: Encodable, Sendable {
    /// A message input to the model with a role indicating instruction following hierarchy.
    /// Instructions given with the `developer` or` system` role take precedence over instructions given with the `user` role.
    case inputMessage(OpenAIInputMessage)

    /// An output message from the model.
    case outputMessage(OpenAIOutputMessage)

    /// The results of a file search tool call. See the file search guide for more information: https://platform.openai.com/docs/guides/tools-file-search
    case fileSearchToolCall(OpenAIFileSearchToolCall)

    /// A tool call to a computer use tool. See the computer use guide for more information: https://platform.openai.com/docs/guides/tools-computer-use
    case computerToolCall(OpenAIComputerToolCall)

    /// The output of a computer tool call.
    case computerToolCallOutput(OpenAIComputerToolCallOutput)

    /// The results of a web search tool call. See the web search guide for more information: https://platform.openai.com/docs/guides/tools-web-search
    case webSearchToolCall(OpenAIWebSearchToolCall)

    /// A tool call to run a function. See the function calling guide for more information: https://platform.openai.com/docs/guides/function-calling
    case functionToolCall(OpenAIFunctionToolCall)

    /// The output of a function tool call.
    case functionToolCallOutput(OpenAIFunctionToolCallOutput)

    /// A description of the chain of thought used by a reasoning model while generating a response.
    /// Be sure to include these items in your input to the Responses API for subsequent turns of a conversation if you are manually managing context: https://platform.openai.com/docs/guides/conversation-state
    case reasoningItem(OpenAIReasoningItem)

    /// A compaction item generated by the `v1/responses/compact` API.
    case compactionItem(OpenAICompactionItem)

    /// An image generation request made by the model.
    case imageGenerationCall(OpenAIImageGenerationToolCall)

    /// A tool call to run code.
    case codeInterpreterToolCall(OpenAICodeInterpreterToolCall)

    /// A tool call to run a command on the local shell.
    case localShellCall(OpenAILocalShellToolCall)

    /// The output of a local shell tool call.
    case localShellCallOutput(OpenAILocalShellToolCallOutput)

    /// A tool representing a request to execute one or more shell commands.
    case shellToolCall(OpenAIShellToolCall)

    /// The streamed output items emitted by a shell tool call.
    case shellToolCallOutput(OpenAIShellToolCallOutput)

    /// A tool call representing a request to create, delete, or update files using diff patches.
    case applyPatchToolCall(OpenAIApplyPatchToolCall)

    /// The streamed output emitted by an apply patch tool call.
    case applyPatchToolCallOutput(OpenAIApplyPatchToolCallOutput)

    /// A list of tools available on an MCP server.
    case mcpListTools(OpenAIMCPListTools)

    /// A request for human approval of a tool invocation.
    case mcpApprovalRequest(OpenAIMCPApprovalRequest)

    /// A response to an MCP approval request.
    case mcpApprovalResponse(OpenAIMCPApprovalResponse)

    /// An invocation of a tool on an MCP server.
    case mcpToolCall(OpenAIMCPToolCall)

    /// A call to a custom tool created by the model.
    case customToolCall(OpenAICustomToolCall)

    /// The output of a custom tool call from your code, being sent back to the model.
    case customToolCallOutput(OpenAICustomToolCallOutput)

    public func encode(to encoder: Encoder) throws {
        switch self {
        case .inputMessage(let inputMessage):
            try inputMessage.encode(to: encoder)

        case .outputMessage(let outputMessage):
            try outputMessage.encode(to: encoder)

        case .fileSearchToolCall(let fileSearchToolCall):
            try fileSearchToolCall.encode(to: encoder)

        case .computerToolCall(let computerToolCall):
            try computerToolCall.encode(to: encoder)

        case .computerToolCallOutput(let computerToolCallOutput):
            try computerToolCallOutput.encode(to: encoder)

        case .webSearchToolCall(let webSearchToolCall):
            try webSearchToolCall.encode(to: encoder)

        case .functionToolCall(let functionToolCall):
            try functionToolCall.encode(to: encoder)

        case .functionToolCallOutput(let functionToolCallOutput):
            try functionToolCallOutput.encode(to: encoder)

        case .reasoningItem(let reasoningItem):
            try reasoningItem.encode(to: encoder)

        case .compactionItem(let compactionItem):
            try compactionItem.encode(to: encoder)

        case .imageGenerationCall(let imageGenerationCall):
            try imageGenerationCall.encode(to: encoder)

        case .codeInterpreterToolCall(let codeInterpreterToolCall):
            try codeInterpreterToolCall.encode(to: encoder)

        case .localShellCall(let localShellCall):
            try localShellCall.encode(to: encoder)

        case .localShellCallOutput(let localShellCallOutput):
            try localShellCallOutput.encode(to: encoder)

        case .shellToolCall(let shellToolCall):
            try shellToolCall.encode(to: encoder)

        case .shellToolCallOutput(let shellToolCallOutput):
            try shellToolCallOutput.encode(to: encoder)

        case .applyPatchToolCall(let applyPatchToolCall):
            try applyPatchToolCall.encode(to: encoder)

        case .applyPatchToolCallOutput(let applyPatchToolCallOutput):
            try applyPatchToolCallOutput.encode(to: encoder)

        case .mcpListTools(let mcpListTools):
            try mcpListTools.encode(to: encoder)

        case .mcpApprovalRequest(let mcpApprovalRequest):
            try mcpApprovalRequest.encode(to: encoder)

        case .mcpApprovalResponse(let mcpApprovalResponse):
            try mcpApprovalResponse.encode(to: encoder)

        case .mcpToolCall(let mcpToolCall):
            try mcpToolCall.encode(to: encoder)

        case .customToolCall(let customToolCall):
            try customToolCall.encode(to: encoder)

        case .customToolCallOutput(let customToolCallOutput):
            try customToolCallOutput.encode(to: encoder)
        }
    }
}
